{% extends 'base.html' %}
{% load humanize %}
{% load text_filters %}
{% load static %}

{% block message %}{% endblock %}

{% block title %}
	{% if search_summary_str %}
		Search Results for {{ search_summary_str }} &mdash;
		{% if not error %}{{ results.paginator.count|intcomma }} Result
			{{ results.paginator.count|pluralize }} &mdash; {% endif %}CourtListener.com
	{% else %}
		Free Legal Search Engine and Alert System &mdash; CourtListener.com
	{% endif %}
{% endblock %}
{% block og_title %}
	{% if search_summary_str %}
		Search Results for {{ search_summary_str }} &mdash;
		{% if not error %}{{ results.paginator.count|intcomma }} Result
			{{ results.paginator.count|pluralize }} &mdash; {% endif %}CourtListener.com
	{% else %}
		Free Legal Search Engine and Alert System &mdash; CourtListener.com
	{% endif %}
{% endblock %}

{% block head %}
	{% if not error %}
		{% if get_string %}
			<link rel="alternate"
				  type="application/rss+xml"
				  title="Atom Feed for These Search Results"
				  href="/feed/search/?{{ get_string }}"/>
		{% endif %}
	{% endif %}
	<link rel="alternate"
		  type="application/rss+xml"
		  title="Atom Feed For All Opinions"
		  href="/feed/court/all/">
	<link rel="alternate"
		  type="application/rss+xml"
		  title="Podcast For All Oral Arguments"
		  href="/podcast/court/all/">
	{% if DEBUG %}
		<link rel="stylesheet"
			  href="{% static "css/bootstrap-datepicker3.css" %}"/>
	{% else %}
		<link rel="stylesheet"
			  href="{% static "css/bootstrap-datepicker3.min.css" %}"/>
	{% endif %}
{% endblock %}

{% block footer-scripts %}
	{% include "includes/date_picker.html" %}
{% endblock %}

{% block navbar-o %}
	{% if search_type == "parenthetical" %}active{% else %}
		{{ block.super }}{% endif %}
{% endblock %}

{% block sidebar %}
	<div class="col-sm-3 search-page" id="sidebar">
		<div class="sidebar-section visible-xs">
			<a class="btn btn-default" href="#search-results">Jump to
				Results</a>
		</div>

		{% if search_type == "parenthetical" %}
			{% include "elasticsearch/sidebar_filters/parenthetical.html" %}
		{% endif %}

		{% include "includes/donate_sidebar.html" with referrer="search-donate-now" %}
	</div>
{% endblock %}


{% block content %}

	<div id="search-results" class="col-lg-7 col-sm-9 search-page">
		{% include "includes/messages.html" %}

		<div class="row">
			<div class="col-sm-12">

				<form action="{% url "es_results" search_type %}"
					  method="get"
					  id="search-form"
					  role="form">
					<div id="search-container" class="v-offset-below-1">
						<label class="sr-only" for="id_q">Search</label>
						<div class="input-group input-group-lg">
							<input class="form-control"
								   value="{{ search_form.q.value|default:'' }}"
								   name="q"
								   id="id_q"
								   autocomplete="off"
								   type="text">

							<span class="input-group-btn">
                                <button type="submit"
										class="btn btn-primary"
										name="search"
										id="search-button"><i
										class="fa fa-search"></i>&nbsp;Search
                                </button>
                            </span>
						</div>
					</div>
				</form>
			</div>
		</div>

		{% if results.paginator.count > 0 %}
			<div class="row">
				<div class="col-sm-12">

					<h2 id="result-count" class="bottom">
						{% if search_type == "parenthetical" %}
							{{ results.paginator.count|intcomma }}
							Parenthetical{{ results.paginator.count|pluralize }} Group{{ results.paginator.count|pluralize }}
						{% endif %}

					</h2>
					<span class="small gray top">{{ query_time|intcomma }}ms</span>
				</div>
			</div>
			{% include "elasticsearch/search_result.html" %}
		{% else %}
			{% include "elasticsearch/no_results.html" %}
		{% endif %}

		{% include "includes/pagination.html" %}
		{% include "includes/random_tip.html" %}
		{% include "includes/jurisdiction_picker_modal.html" %}
	</div>

{% endblock %}
